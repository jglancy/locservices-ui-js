define(["jquery","locservices/core/api","locservices/ui/component/search","locservices/ui/component/message","locservices/ui/component/geolocation","locservices/ui/component/auto_complete","locservices/ui/component/search_results","locservices/ui/component/user_locations","locservices/ui/component/close_button"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(j){m(j);var n=this,o=j.alwaysOpen||!1,p={onLocation:function(b){a.emit(n.namespace+":controller:location",[b])},onActive:function(){a.emit(n.namespace+":controller:active"),n.container.addClass("ls-ui-ctrl-active")},onGeolocation:function(){n.container.addClass("li-ui-ctrl-geolocation")},onSearchResults:function(){n.container.find(".ls-ui-comp-user_locations").addClass("ls-ui-hidden")},onClose:function(){n.message.clear(),n.results.clear(),n.autoComplete.clear(),a.emit(n.namespace+":controller:inactive"),n.container.removeClass("ls-ui-ctrl-active"),n.container.find(".ls-ui-comp-user_locations").removeClass("ls-ui-hidden")}};n.api=new b(j.api),n.container=j.container,n.container.addClass("ls-ui-ctrl-primary").append(k.append(l)),n.namespace=j.namespace||"locservices:ui",a.on(n.namespace+":error",p.onActive),a.on(n.namespace+":component:search:focus",p.onActive),a.on(n.namespace+":component:auto_complete:render",p.onSearchResults),a.on(n.namespace+":component:search:results",p.onSearchResults),a.on(n.namespace+":component:geolocation:location",p.onLocation),a.on(n.namespace+":component:auto_complete:location",p.onLocation),a.on(n.namespace+":component:user_locations:location",p.onLocation),a.on(n.namespace+":component:search_results:location",p.onLocation),a.on(n.namespace+":component:geolocation:available",p.onGeolocation),a.on(n.namespace+":component:close_button:clicked",p.onClose),n.search=new c({api:this.api,translations:j.translations,eventNamespace:n.namespace,container:l}),n.autoComplete=new f({api:this.api,translations:j.translations,eventNamespace:n.namespace,element:n.search.input,container:k}),n.geolocation=new e({api:this.api,translations:j.translations,eventNamespace:n.namespace,container:k}),n.message=new d({translations:j.translations,eventNamespace:n.namespace,container:k}),n.results=new g({api:this.api,translations:j.translations,eventNamespace:n.namespace,container:k}),n.userLocations=new h({translations:j.translations,eventNamespace:n.namespace,container:k}),o||(n.closeButton=new i({translations:j.translations,eventNamespace:n.namespace,container:k})),o&&(n.container.addClass("ls-ui-ctrl-open"),a.emit(n.namespace+":component:search:focus"))}var k=a("<div />").addClass("ls-ui-o"),l=a("<div />").addClass("ls-ui-ctrl-primary-search"),m=function(a){for(var b=["api","translations","container"],c=b.length,d=0;c>d;d++){var e=b[d];if(!a[e])throw new Error("Primary Controller requires an "+e+" option.")}};return j});