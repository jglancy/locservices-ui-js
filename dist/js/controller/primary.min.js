define(["jquery","locservices/core/api","locservices/ui/component/search","locservices/ui/component/message","locservices/ui/component/geolocation","locservices/ui/component/search_results","locservices/ui/component/user_locations","locservices/ui/component/close_button"],function(a,b,c,d,e,f,g,h){"use strict";function i(i){l(i);var m=this,n={onLocation:function(b){a.emit(m.namespace+":controller:location",[b])},onActive:function(){a.emit(m.namespace+":controller:active"),m.container.addClass("ls-ui-ctrl-active")},onGeolocation:function(){m.container.addClass("li-ui-ctrl-geolocation")},onSearchResults:function(){m.container.find(".ls-ui-comp-userLocations").addClass("ls-ui-hidden")},onClose:function(){m.message.clear(),m.results.clear(),a.emit(m.namespace+":controller:inactive"),m.container.removeClass("ls-ui-ctrl-active")}};m.api=new b(i.api),m.container=i.container,m.container.addClass("ls-ui-ctrl-primary"),m.container.append(j.append(k)),m.namespace=i.namespace||"locservices:ui",a.on(m.namespace+":error",n.onActive),a.on(m.namespace+":component:search:focus",n.onActive),a.on(m.namespace+":component:search:results",n.onSearchResults),a.on(m.namespace+":component:geolocation:location",n.onLocation),a.on(m.namespace+":component:auto_complete:location",n.onLocation),a.on(m.namespace+":component:search_results:location",n.onLocation),a.on(m.namespace+":component:geolocation:available",n.onGeolocation),a.on(m.namespace+":component:close_button:clicked",n.onClose),m.search=new c({api:this.api,translations:i.translations,eventNamespace:m.namespace,container:k}),m.geolocation=new e({api:this.api,translations:i.translations,eventNamespace:m.namespace,container:j}),m.message=new d({translations:i.translations,eventNamespace:m.namespace,container:j}),m.results=new f({api:this.api,translations:i.translations,eventNamespace:m.namespace,container:j}),m.userLocations=new g({translations:i.translations,eventNamespace:m.namespace,container:j}),m.closeButton=new h({translations:i.translations,eventNamespace:m.namespace,container:j})}var j=a("<div />").addClass("ls-ui-o"),k=a("<div />").addClass("ls-ui-ctrl-primary-search"),l=function(a){for(var b=["api","translations","container"],c=b.length,d=0;c>d;d++){var e=b[d];if(!a[e])throw new Error("Primary Controller requires an "+e+" option.")}};return i});