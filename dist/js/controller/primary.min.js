define(["jquery","locservices/core/api","locservices/ui/component/search","locservices/ui/component/message","locservices/ui/component/geolocation","locservices/ui/component/search_results","locservices/ui/component/user_locations"],function(a,b,c,d,e,f,g){"use strict";function h(h){i(h);var k=this;k.userLocations,k.results,k.message=void 0,k.api=new b(h.api),k.container=h.container,k.container.addClass("ls-ui-ctrl-primary"),k.closeButton=j(h.translations),k.container.find(".ls-ui-o").append(this.closeButton);var l=h.namespace||"locservices:ui";a.on(l+":error",function(){a.emit(l+":controller:active"),k.container.addClass("ls-ui-ctrl-active")}),a.on(l+":component:search:results",function(){k.userLocations.container.addClass("ls-ui-hidden")}),a.on(l+":component:geolocation:available",function(){k.container.addClass("li-ui-ctrl-geolocation")}),a.on(l+":component:search:focus",function(){a.emit(l+":controller:active"),k.container.addClass("ls-ui-ctrl-active")}),a.on(l+":component:geolocation:location",function(b){a.emit(l+":controller:location",[b])}),a.on(l+":component:search_results:location",function(b){a.emit(l+":controller:location",[b])}),k.closeButton.on("click",function(b){b.preventDefault(),k.message.clear(),k.results.clear(),a.emit(l+":controller:inactive"),k.container.removeClass("ls-ui-ctrl-active")}),k.search=new c({api:this.api,translations:h.translations,eventNamespace:l,container:this.container.find(".ls-ui-search")}),k.geolocation=new e({api:this.api,translations:h.translations,eventNamespace:l,container:this.container.find(".ls-ui-geolocation")}),k.message=new d({translations:h.translations,eventNamespace:l,container:this.container.find(".ls-ui-message")}),k.results=new f({api:this.api,translations:h.translations,eventNamespace:l,container:this.container.find(".ls-ui-search-results")}),k.userLocations=new g({translations:h.translations,eventNamespace:l,container:this.container.find(".ls-ui-user-locations")})}var i=function(a){for(var b=["api","translations","container"],c=b.length,d=0;c>d;d++){var e=b[d];if(!a[e])throw"Primary controller requires an "+e+" option."}},j=function(b){return a("<button />").addClass("ls-ui-close").text(b.get("primary_search.close"))};return h});