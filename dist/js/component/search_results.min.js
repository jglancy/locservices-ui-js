define(["jquery","locservices/ui/component/component"],function(a,b){"use strict";function c(b){var c=this;if(b=b||{},b.componentId="search-results",void 0===b.api)throw new Error("SearchResults requires api parameter");c.api=b.api,c.setComponentOptions(b),a.on(this.eventNamespaceBase+":component:search:results",function(a,b){if(1===a.totalResults){var d=b[0];return void c.emit("location",[d])}c.render(a,b)}),c._data={},c.setup()}return c.prototype=new b,c.prototype.constructor=c,c.prototype.setup=function(){var b=a("<div />").addClass("li-ui-comp-search-results-container");this.list=a("<ul />"),this.moreResults=a("<a />").attr("href","").addClass("ls-ui-comp-search-results-more").text("Show more results"),b.append(this.list).append(this.moreResults),this.container.append(b);var c=this;this.list.on("click",function(b){var d;return b.preventDefault(),d=a(b.target).data("id"),c.emit("location",[c._data[d]]),c.clear(),!1}),this.moreResults.on("click",function(a){return a.preventDefault(),c.api.search(c.searchTerm,{start:c.offset+10,success:function(a){c.render(a.metadata,a.results)}}),!1})},c.prototype.render=function(a,b){var c,d,e,f="";for(this.offset=a.start||0,this.searchTerm=a.search,c=0;c<b.length;c++)d=b[c],this._data[d.id]=d,e=d.name,d.container&&(e+=", "+d.container),f+='<li><a href="" data-id="'+d.id+'">'+e+"</a></li>";0===this.offset?this.list.html(f):this.list.append(f),a.totalResults>10&&this.offset+10<a.totalResults?this.moreResults.addClass("active"):this.moreResults.removeClass("active")},c.prototype.clear=function(){this.moreResults.removeClass("active"),this.list.empty(),this._data={}},c});