define(["jquery","locservices/ui/component/component","locservices/core/api"],function(a,b,c){"use strict";function d(b){var d=this;b=b||{},b.componentId="search-results",d.setComponentOptions(b),a.on("locservices:ui:component:search:results",function(b,c){return 1===b.totalResults?void a.emit("locservices:ui:component:search-results:location",[c[0].id]):void d.render(b,c)}),this.api=new c,d.setup()}return d.prototype=new b,d.prototype.constructor=d,d.prototype.setup=function(){var b='<div class="li-ui-comp-search-results-container"><h2>Search results</h2><ul></ul><a href="" class="ls-ui-comp-search-results-more">Show more results.</a></div>';this.container.append(b),this.moreResults=this.container.find(".ls-ui-comp-search-results-more"),this.title=this.container.find("h2"),this.list=this.container.find("ul");var c=this;this.list.on("click",function(b){var d;return b.preventDefault(),d=a(b.target).data("id"),a.emit("locservices:ui:component:search-results:location",[d]),c.clear(),!1}),this.moreResults.on("click",function(a){return a.preventDefault(),c.api.search(c.searchTerm,{start:c.offset+10,success:function(a){c.render(a.metadata,a.results)}}),!1})},d.prototype.render=function(a,b){var c,d,e,f="";for(this.offset=a.start||0,this.searchTerm=a.search,c=0;c<b.length;c++)d=b[c],e=d.name,d.container&&(e+=", "+d.container),f+='<li><a href="" data-id="'+d.id+'">'+e+"</a></li>";0===this.offset?this.list.html(f):this.list.append(f),a.totalResults>10&&this.offset+10<a.totalResults?this.moreResults.addClass("active"):this.moreResults.removeClass("active"),this.title.text("Search results for: "+this.searchTerm)},d.prototype.clear=function(){this.moreResults.removeClass("active"),this.title.text(""),this.list.empty()},d});