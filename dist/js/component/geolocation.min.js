define(["jquery","locservices/ui/component/component","locservices/core/geolocation"],function(a,b,c){function d(a,b){return function(){return a.apply(b,arguments)}}function e(b){if(this.isSupported=c.isSupported,this.isSupported!==!1){if(b=b||{},b.componentId="geolocation","object"!=typeof b.api)throw new Error("Gelocation requires an API option.");this.emit("available"),this.api=b.api;var d=this;this.setComponentOptions(b);var e=this.translations.get("geolocation.button.label");this.container.append(f.replace("{text}",e)),this._button=this.container.find("button"),this._button.on("click",function(b){b.preventDefault(),a(this).attr("disabled","disabled").addClass("disabled"),d.reverseGeocode()})}}var f='<button type="button" class="locservices-ui-component locservices-ui-component-geolocation">';return f+='<span class="locservices-ui-component-geolocation-label">{text}</span>',f+='<span class="locservices-ui-component-geolocation-icon"></span></button>',e.prototype=new b,e.prototype.constructor=e,e.prototype.reverseGeocode=function(){function a(a){var b=a.coords.longitude,c=a.coords.latitude;e.api.reverseGeocode(c,b,{success:function(a){var b=a.results[0];b.isWithinContext?(e._button.removeAttr("disabled").removeClass("disabled"),e.emit("location",[b])):e.emit("error",[{code:"geolocation.error.outsideContext",message:"Your location is not currently supported by this application"}])},error:function(){e.emit("error",[{code:"geolocation.error.http",message:"We were unable to make a location api request"}])}})}function b(a){var b="geolocation.error.browser",c="An error occurred obtaining the browsers position. Error code "+a.code;1===a.code&&(b+=".permission"),this.emit("error",[{code:b,message:c}])}var e=this;c.getCurrentPosition(d(a,this),d(b,this))},e});