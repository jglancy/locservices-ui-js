define(["jquery","locservices/ui/component/component"],function(a,b){"use strict";function c(a){var b=this;if(a=a||{},a.componentId="search",void 0===a.api)throw new Error("Search requires api parameter");b.api=a.api,b.setComponentOptions(a),g(b.translations,b.container),b.input=b.container.find("input[type=text]"),b.isSearching=!1,b.container.on("submit",function(a){a.preventDefault(),b.search(b.input.val())})}var d=a("<form />").attr("method","post").attr("action","#").addClass("ls-ui-form"),e=function(b){return a("<input />").attr("type","text").attr("class","ls-ui-input").attr("placeholder",b.get("search.placeholder"))},f=function(b){return a("<input />").attr("type","submit").attr("class","ls-ui-submit").attr("value",b.get("search.submit"))};c.prototype=new b,c.prototype.constructor=c,c.prototype.search=function(b){var c=this;void 0!==b&&0!==b.length&&!0!==c.isSearching&&(a.emit(c.eventNamespace+":start",[b]),c.isSearching=!0,c.api.search(b,{params:{},success:function(d){a.emit(c.eventNamespace+":end"),c.isSearching=!1,d.metadata.startOffset=0,d.metadata.searchTerm=b,a.emit(c.eventNamespace+":results",[d.results,d.metadata])},error:function(){a.emit(c.eventNamespace+":end"),c.isSearching=!1,a.emit(c.eventNamespace+":error",['Error searching for "'+b+'"'])}}))};var g=function(b,c){var g=e(b),h=f(b);c.html(d.append(a("<div />").addClass("ls-ui-col").append(g)).append(a("<div />").addClass("ls-ui-col").append(h))).addClass("ls-ui-comp-search")};return c});