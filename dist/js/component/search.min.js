define(["jquery","locservices/ui/component/component"],function(a,b){"use strict";function c(a){var b=this;if(a=a||{},a.componentId="search",void 0===a.api)throw new Error("Search requires api parameter");b.api=a.api,b.setComponentOptions(a),b.isSearching=!1,h(b.translations,b.container),b.input=b.container.find("input[type=text]"),b.container.on("submit",function(a){a.preventDefault(),b.search(b.input.val())}),b.input.on("focus",function(){b.emit("focus")})}var d=a("<form />").attr("method","post").attr("action","#").addClass("ls-ui-form"),e=a("<div />").addClass("ls-ui-container"),f=function(b){return a("<input />").attr("type","text").attr("class","ls-ui-input").attr("placeholder",b.get("search.placeholder"))},g=function(b){return a("<input />").attr("type","submit").attr("class","ls-ui-submit").attr("value",b.get("search.submit")).attr("title",b.get("search.submit.title"))};c.prototype=new b,c.prototype.constructor=c,c.prototype.search=function(a){var b=this;void 0!==a&&0!==a.length&&!0!==b.isSearching&&(b.emit("start",[a]),b.isSearching=!0,b.api.search(a,{success:function(a){b.emit("end"),b.isSearching=!1,b.emit("results",[a.results,a.metadata])},error:function(){b.emit("end"),b.isSearching=!1,b.emit("error",['Error searching for "'+a+'"'])}}))};var h=function(a,b){var c=f(a),h=g(a);b.addClass("ls-ui-comp-search").html(d.append(e.append(c)).append(h))};return c});